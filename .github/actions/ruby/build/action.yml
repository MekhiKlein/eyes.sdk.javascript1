name: Ruby build
description: Build Ruby SDK Packages

inputs:
  working-directory:
    description: the path to the directory from repository root
    type: string
    required: true

runs:
  using: composite
  steps:
    - name: Build Gems
      shell: bash
      working-directory: ${{ inputs.working-directory }}
      env:
        BUILD_ONLY: true
      run: |
        gem install builder
        echo "::group::Building package"
        rake clobber clean build
        cd pkg
        mkdir gems
        mv ./*.gem ./gems
        gem generate_index
